<link rel="stylesheet" href="style.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<div class="signatureForm">
    <div class="container innerse" id="former">
      <h2 class="titleUp">
        AMT Email Signature Generator (Compact)
      </h2>
      <div class="formPlus">
        <form id="form">
          <div class="field is-horizontal">
            <div class="field-label is-normal">
              <label class="label" for="fname">First Name</label>
            </div>
            <div class="field-body">
              <div class="field has-addons has-addons-centered">
                <p class="control is-expanded">
                  <input id="fname" class="input name" placeholder="First Name">
                </p>
              </div>
            </div>
          </div>
  
          <div class="field is-horizontal">
            <div class="field-label is-normal">
              <label class="label" for="lname">Last Name</label>
            </div>
            <div class="field-body">
              <div class="field has-addons has-addons-centered">
                <p class="control is-expanded">
                  <input id="lname" class="input name" placeholder="Last Name">
                </p>
              </div>
            </div>
          </div>
  
          <div class="field is-horizontal">
            <div class="field-label is-normal">
              <label class="label" for="position">Position</label>
            </div>
            <div class="field-body">
              <div class="field has-addons has-addons-centered">
                <p class="control is-expanded">
                  <input id="position" class="input" placeholder="Job Title">
                </p>
              </div>
            </div>
          </div>
  
          <div class="field is-horizontal cellphone">
            <div class="field-label is-normal">
              <label class="label" for="phone">Phone Number (Optional)</label>
            </div>
            <div class="field-body cellphonecover">
              <div class="field has-addons has-addons-centered cellphoneitem">
                <p class="control is-expanded">
                  <input id="phone" class="input" type="text" placeholder="515-331-2602">
                </p>
              </div>
            </div>
          </div>
  
          <div class="field is-horizontal">
            <div class="field-label is-normal">
              <label class="label" for="email">Email</label>
            </div>
            <div class="field-body">
              <div class="field has-addons has-addons-centered">
                <p class="control is-expanded">
                  <input id="email" class="input" type="email" placeholder="sales@amtiowa.com">
                </p>
              </div>
            </div>
          </div>
  
          <div class="field is-horizontal">
            <div class="field-label is-normal">
              <label class="label">Include ISO 9001 Badge?</label>
            </div>
            <div class="field-body">
              <div class="field">
                <div class="control">
                  <label class="radio">
                    <input type="radio" name="iso_badge" value="1" checked>
                    Yes
                  </label>
                  <label class="radio">
                    <input type="radio" name="iso_badge" value="0">
                    No
                  </label>
                </div>
              </div>
            </div>
          </div>
        </form>
        <button class="btn btn-orange" id="sbmtForm">Generate Signature</button>
      </div>
    </div>
  </div>
  
  <div id="hidden" class="bottomHalf" style="display: none;">
    <h2 class="titleUp">
      AMT Email Signature (Compact)
    </h2>
    <div class="container innerse">
      <div class="column">
        <article class="message is-primary">
          <div class="message-body" id="signature_container">
            <!-- AMT Signature Structure - Three Column Layout -->
            <table width="750" cellpadding="0" cellspacing="0" style="font-family: 'Inter', Arial, sans-serif; border-collapse: collapse; background-color: #ffffff;">
              <tbody>
                <!-- Name and Title Section -->
                <tr>
                  <td colspan="5" style="padding: 15px 20px 20px 20px;">
                    <h2 class="name" style="margin: 0; padding: 0; color: #000000; font-size: 38px; font-weight: 700; line-height: 1.1; font-family: 'Montserrat', Arial, sans-serif;">
                      First Name Last Name
                    </h2>
                    <p class="position" style="margin: 8px 0 0 0; padding: 0; color: #000000; font-size: 16px; font-weight: 400; line-height: 1.3; font-family: 'Inter', Arial, sans-serif;">
                      Job Title
                    </p>
                  </td>
                </tr>
                
                <!-- Main Content Section with 3 Columns -->
                <tr>
                  <!-- Column 1: Vertical Logo -->
                  <td style="vertical-align: middle; padding: 0 20px; width: 220px;">
                    <img src="img/Logo.png" 
                         alt="AMT Logo" 
                         width="200" 
                         style="max-width: 200px; display: block;">
                  </td>
                  
                  <!-- Divider Line -->
                  <td style="vertical-align: middle; width: 2px; padding: 0 15px;">
                    <div style="width: 1px; height: 120px; background-color: #000000;"></div>
                  </td>
                  
                  <!-- Column 2: Contact Info with Icons -->
                  <td style="vertical-align: middle; padding: 0 20px 0 0; width: 300px;">
                    <table cellpadding="0" cellspacing="0">
                      <tr>
                        <td style="padding-bottom: 8px; vertical-align: middle;">
                          <table cellpadding="0" cellspacing="0">
                            <tr>
                              <td style="vertical-align: middle; padding-right: 10px;">
                                <div style="width: 28px; height: 28px; background-color: #000000; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                  <span style="color: #ffffff; font-size: 16px;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M112 128C85.5 128 64 149.5 64 176C64 191.1 71.1 205.3 83.2 214.4L291.2 370.4C308.3 383.2 331.7 383.2 348.8 370.4L556.8 214.4C568.9 205.3 576 191.1 576 176C576 149.5 554.5 128 528 128L112 128zM64 260L64 448C64 483.3 92.7 512 128 512L512 512C547.3 512 576 483.3 576 448L576 260L377.6 408.8C343.5 434.4 296.5 434.4 262.4 408.8L64 260z" fill="#ffffff"/></svg></span>
                                </div>
                              </td>
                              <td class="email" style="vertical-align: middle;">
                                <a href="mailto:sales@amtiowa.com" style="color: #000000; text-decoration: none; font-size: 14px; font-family: 'Inter', Arial, sans-serif;">sales@amtiowa.com</a>
                              </td>
                            </tr>
                          </table>
                        </td>
                      </tr>
                      <tr>
                        <td style="padding-bottom: 8px; vertical-align: middle;">
                          <table cellpadding="0" cellspacing="0">
                            <tr>
                              <td style="vertical-align: middle; padding-right: 10px;">
                                <div style="width: 28px; height: 28px; background-color: #000000; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                  <span style="color: #ffffff; font-size: 16px;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M415.9 344L225 344C227.9 408.5 242.2 467.9 262.5 511.4C273.9 535.9 286.2 553.2 297.6 563.8C308.8 574.3 316.5 576 320.5 576C324.5 576 332.2 574.3 343.4 563.8C354.8 553.2 367.1 535.8 378.5 511.4C398.8 467.9 413.1 408.5 416 344zM224.9 296L415.8 296C413 231.5 398.7 172.1 378.4 128.6C367 104.2 354.7 86.8 343.3 76.2C332.1 65.7 324.4 64 320.4 64C316.4 64 308.7 65.7 297.5 76.2C286.1 86.8 273.8 104.2 262.4 128.6C242.1 172.1 227.8 231.5 224.9 296zM176.9 296C180.4 210.4 202.5 130.9 234.8 78.7C142.7 111.3 74.9 195.2 65.5 296L176.9 296zM65.5 344C74.9 444.8 142.7 528.7 234.8 561.3C202.5 509.1 180.4 429.6 176.9 344L65.5 344zM463.9 344C460.4 429.6 438.3 509.1 406 561.3C498.1 528.6 565.9 444.8 575.3 344L463.9 344zM575.3 296C565.9 195.2 498.1 111.3 406 78.7C438.3 130.9 460.4 210.4 463.9 296L575.3 296z" fill="#ffffff"/></svg></span>
                                </div>
                              </td>
                              <td style="vertical-align: middle;">
                                <a href="https://www.amtiowa.com" style="color: #000000; text-decoration: none; font-size: 14px; font-family: 'Inter', Arial, sans-serif;">www.amtiowa.com</a>
                              </td>
                            </tr>
                          </table>
                        </td>
                      </tr>
                      <tr>
                        <td style="padding-bottom: 8px; vertical-align: middle;">
                          <table cellpadding="0" cellspacing="0">
                            <tr>
                              <td style="vertical-align: middle; padding-right: 10px;">
                                <div style="width: 28px; height: 28px; background-color: #000000; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                  <span style="color: #ffffff; font-size: 16px;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M160.2 25C152.3 6.1 131.7-3.9 112.1 1.4l-5.5 1.5c-64.6 17.6-119.8 80.2-103.7 156.4 37.1 175 174.8 312.7 349.8 349.8 76.3 16.2 138.8-39.1 156.4-103.7l1.5-5.5c5.4-19.7-4.7-40.3-23.5-48.1l-97.3-40.5c-16.5-6.9-35.6-2.1-47 11.8l-38.6 47.2C233.9 335.4 177.3 277 144.8 205.3L189 169.3c13.9-11.3 18.6-30.4 11.8-47L160.2 25z" fill="#ffffff"/></svg></span>
                                </div>
                              </td>
                              <td class="phone" style="vertical-align: middle;">
                                <a href="tel:515-331-2602" style="color: #000000; text-decoration: none; font-size: 14px; font-family: 'Inter', Arial, sans-serif;">515-331-2602</a>
                              </td>
                            </tr>
                          </table>
                        </td>
                      </tr>
                      <tr>
                        <td style="vertical-align: middle;">
                          <table cellpadding="0" cellspacing="0">
                            <tr>
                              <td style="vertical-align: middle; padding-right: 10px;">
                                <div style="width: 28px; height: 28px; background-color: #000000; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                  <span style="color: #ffffff; font-size: 16px;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M128 252.6C128 148.4 214 64 320 64C426 64 512 148.4 512 252.6C512 371.9 391.8 514.9 341.6 569.4C329.8 582.2 310.1 582.2 298.3 569.4C248.1 514.9 127.9 371.9 127.9 252.6zM320 320C355.3 320 384 291.3 384 256C384 220.7 355.3 192 320 192C284.7 192 256 220.7 256 256C256 291.3 284.7 320 320 320z" fill="#ffffff"/></svg></span>
                                </div>
                              </td>
                              <td style="vertical-align: middle;">
                                <span style="color: #000000; font-size: 14px; font-family: 'Inter', Arial, sans-serif;">5750 NW Beaver Drive<br>Johnston, IA 50131</span>
                              </td>
                            </tr>
                          </table>
                        </td>
                      </tr>
                    </table>
                  </td>
                  
                  <!-- Divider Line -->
                  <td style="vertical-align: middle; width: 2px; padding: 0 15px;">
                    <div style="width: 1px; height: 120px; background-color: #000000;"></div>
                  </td>
                  
                  <!-- Column 3: ISO Badge -->
                  <td class="iso_badge_container" style="vertical-align: middle; text-align: center; padding: 0 15px;">
                    <img src="img/ISO-9001-certified-stamp.png" 
                         alt="ISO 9001 Certified" 
                         width="90" 
                         style="max-width: 90px; display: block; margin: 0 auto;">
                  </td>
                </tr>
                
                <!-- Black Bar at Bottom -->
                <tr>
                  <td colspan="5" style="padding: 15px 0 0 0;">
                    <div style="width: 100%; height: 30px; background-color: #000000;"></div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </article>
  
        <div class="controls">
          <button class="button is-info" id="prepareButton" data-prepare data-signature="signature">
            Prepare HTML (for Outlook)
          </button>
          <a class="button is-primary is-hidden" id="downloadButton" data-load download="amt_signature_compact.html">
            Download HTML File
          </a>
          <button class="button is-warning" id="resetButton">
            Reset Generator
          </button>
        </div>
      </div>
  
      <div class="instructions" style="padding: 2rem 0;">
        <h3>Final Steps:</h2>
        <div class="sidenote">
          <p class="titleNote">IMPORTANT:</p>
          <p><em>Outlook doesn’t sync signatures between the desktop app and browser, so you need to set them up separately to ensure your signature shows up consistently across both platforms.</em></p>
        </div>
  
        <h2>For Desktop Outlook:</h3>
        <h4 class="lineouut">On Mac:</h4>
        1. Open the HTML file in a browser (right-click and select "Open With" > choose a browser).  
        <br><br>
        2. Select the entire signature using <strong>Cmd + A</strong> (Mac).  
        <br><br>
        3. Open Desktop Outlook and go to <strong>Outlook > Settings > Edit</strong> or click <strong>[+]</strong> to create a new template, then click <strong>Edit</strong>.  
        <br><br>
        4. Create a new signature or select an existing one, then paste the copied signature into the editor box with <strong>Cmd + V</strong> (Mac).  
        <br><br>
        5. Assign the signature to your email accounts as needed, then close the window to save.  
  
        <br><br>
        <h4 class="lineouut">On Windows:</h4>
        1. Open the HTML file in a browser (right-click and select "Open With" > choose a browser).  
        <br><br>
        2. Select the entire signature using <strong>Ctrl + A</strong> (Windows).  
        <br><br>
        3. Open Desktop Outlook and go to <strong>File > Options > Mail > Signatures</strong>.  
        <br><br>
        4. Create a new signature or select an existing one, then paste the copied signature into the editor box with <strong>Ctrl + V</strong> (Windows).  
        <br><br>
        5. Assign the signature to your email accounts as needed, then click <strong>OK</strong> to save.  
        <br><br>
  
        <h2>For Web Outlook:</h3>
        1. Click the button above to download your signature as an .html file.  
        <br><br>
        2. Open the HTML file in a browser (right-click and select "Open With" > choose a browser).  
        <br><br>
        3. Select the entire signature using <strong>Ctrl + A</strong> (Windows) or <strong>Cmd + A</strong> (Mac).  
        <br><br>
        4. Go to your Web Outlook (<a href="https://outlook.office.com">https://outlook.office.com</a>) and log in.  
        <br><br>
        5. In the top right, click the gear icon (⚙️), then click <strong>View all Outlook settings</strong> at the bottom.  
        <br><br>
        6. Go to <strong>Account > Signatures</strong>, then paste the copied signature into the signature box with <strong>Ctrl + V</strong> (Windows) or <strong>Cmd + V</strong> (Mac).  
        <br><br>
        7. Save your changes.  
        <br><br>
  
        <div class="sidenote">
          <p class="titleNote">NOTE:</p>
          <p><em>If you're using Desktop Outlook, follow the steps carefully based on your operating system to avoid issues with images, links, or spacing.</em></p>
        </div>
      </div>
    </div>
  </div>
  
  
  <style>
    .button.is-primary {
      background-color: var(--dark);
      border-color: transparent;
      color: #fff;
      border: 1px solid transparent;
      border-radius: 500rem;
      cursor: pointer;
      display: inline-block;
      font-family: var(--bold);
      font-size: 1.125rem;
      font-weight: 600;
      letter-spacing: .1rem;
      line-height: 1.5;
      padding: .375rem 1.5rem;
      text-align: center;
      text-transform: uppercase;
      /* background: var(--primary); */
      border: 1px solid var(--dark);
      color: #fff;
      /* display: block; */
      margin-top: 40px;
      transition: all .3s ease;
    }
    .copy-success {
      display: none;
    }
    .field-label {
      text-align: left;
      white-space: nowrap;
    }
    .signatureForm div#former form#form {
      max-width: none;
      width: 100%;
    }
    #former input:not([type=radio]) {
      background-color: #fff;
      border: 1px solid #cbd6e2;
      -webkit-border-radius: 3px;
      -moz-border-radius: 3px;
      -ms-border-radius: 3px;
      border-radius: 3px;
      box-sizing: border-box;
      color: #33475b;
      display: inline-block;
      font-size: 16px;
      font-weight: 400;
      height: 25px;
      height: 40px;
      line-height: 22px;
      max-width: 100%;
      min-height: 27px;
      padding: 0 15px;
      width: 100%;
      box-shadow: none;
    }
    .signatureForm #former label {
      background: transparent;
      border: none;
      display: flex;
      padding-bottom: 0;
      font-size: 16px;
      font-weight: 400;
      padding: 10px 0;
      color: var(--dark);
      font-weight: bold;
      filter: contrast(1.2);
      column-gap: 11px;
    }
    .field.is-horizontal {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      flex-direction: column;
      flex-wrap: wrap;
    }
    button#sbmtForm {
      margin-top: 50px;
      transition: all .3s ease;
    }
    .button.is-info {
      border-radius: 500rem;
      cursor: pointer;
      display: inline-block;
      font-family: var(--bold);
      font-size: 1.125rem;
      font-weight: 600;
      letter-spacing: .1rem;
      line-height: 1.5;
      padding: .375rem 1.5rem;
      text-align: center;
      text-transform: uppercase;
      background: var(--primary);
      border: 1px solid var(--primary);
      color: #fff;
      margin-top: 40px;
      transition: all .3s ease;
    }
    .button.is-info:hover {
      background: transparent;
      color: #014261;
    }
    button#sbmtForm:hover {
      background: transparent;
      color: #014261;
    }
    .button.is-primary:hover {
      background: transparent;
      color: #014261;
    }
    @media screen and (min-width: 769px), print {
      .field-label {
        text-align: left;
        white-space: nowrap;
      }
      .field.is-horizontal {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        flex-direction: column;
        flex-wrap: wrap;
      }
    }
  </style>
  
  <script>
    $(document).ready(function() {
      function formatPhoneNumber(input) {
        // Remove all non-digit characters
        var cleaned = input.replace(/\D/g, '');
        var formattedPhone = '';
  
        // Only format if we have digits
        if (cleaned.length > 0) {
          // Handle area code
          formattedPhone += '' + cleaned.substring(0, Math.min(3, cleaned.length)) + '';
        }
        if (cleaned.length > 3) {
          // Handle first three digits after area code
          formattedPhone += '-' + cleaned.substring(3, Math.min(6, cleaned.length));
        }
        if (cleaned.length > 6) {
          // Handle remaining digits
          formattedPhone += '-' + cleaned.substring(6, Math.min(10, cleaned.length));
        }
  
        return formattedPhone;
      }
  
      function handleInput() {
        var currentValue = $(this).val();
        var digitsOnly = currentValue.replace(/\D/g, '');
  
        // Only keep up to 10 digits
        digitsOnly = digitsOnly.substring(0, 10);
  
        // Format and set the value
        var formatted = formatPhoneNumber(digitsOnly);
        $(this).val(formatted);
        $(this).attr('data-phone', digitsOnly);
      }
  
      $('#phone').on('input', handleInput);
      $('#phone').on('blur', function() {
        var digitsOnly = $(this).val().replace(/\D/g, '');
      });
    });
  
    $(document).ready(function() {
      $('#resetButton').on('click', function() {
        // Reset all form inputs
        $('#form')[0].reset();
  
        // Hide the signature view and show the form
        $('#hidden').hide();
        $('.signatureForm').show();
  
        $('#downloadButton')
          .addClass('is-hidden')
          .text('Download HTML File'); // Reset the download button text
        $('#prepareButton').removeClass('is-hidden');
  
        // Reset signature text back to defaults
        $('.name').text('First Name Last Name');
        $('.position').text('Job Title');
        $('.email').html('<a href="mailto:sales@amtiowa.com" style="color: #000000; text-decoration: none; font-size: 14px; font-family: \'Inter\', Arial, sans-serif;">sales@amtiowa.com</a>');
        $('.phone').html('<a href="tel:515-331-2602" style="color: #000000; text-decoration: none; font-size: 14px; font-family: \'Inter\', Arial, sans-serif;">515-331-2602</a>');
        
        // Reset ISO badge (show it)
        $('.iso_badge_container').show();
      });
    });
  
  
    $(document).ready(function() {
      // Form submission
      $('#sbmtForm').click(function() {
        $('.signatureForm').hide();
        $('#hidden').slideDown();
        updateSignature();
      });
  
      // HTML preparation and download
      const prepare = document.querySelector('#prepareButton');
      const download = document.querySelector('#downloadButton');
  
      prepare.addEventListener('click', prepareHTML);
  
      function prepareHTML() {
        const html = document.querySelector('#signature_container').innerHTML;
        const blob = new Blob([html], { type: 'text/html' });
        download.href = window.URL.createObjectURL(blob);
        download.classList.remove('is-hidden');
        prepare.classList.add('is-hidden');
      }
      // Improved download button handling
      $('#downloadButton').click(function() {
        const button = $(this);
        button.text('✓ Downloaded!');
  
        // When user returns from file save dialog (window regains focus)
        $(window).one('focus', function() {
          // Wait a moment for visual feedback
          setTimeout(function() {
            button.text('Download Again');
          }, 2000);
        });
      });
    });
  
    function updateSignature() {
      // Update name
      const firstName = $('#fname').val();
      const lastName = $('#lname').val();
      $('.name').text(firstName + ' ' + lastName);
  
      // Update position
      $('.position').text($('#position').val());
  
      // Update email
      const email = $('#email').val();
      if (email && email.trim() !== '') {
        $('.email').html(`<a href="mailto:${email}" style="color: #000000; text-decoration: none; font-size: 14px; font-family: 'Inter', Arial, sans-serif;">${email}</a>`);
      } else {
        $('.email').html('<a href="mailto:sales@amtiowa.com" style="color: #000000; text-decoration: none; font-size: 14px; font-family: \'Inter\', Arial, sans-serif;">sales@amtiowa.com</a>');
      }
  
      // Update phone
      const phoneInput = $('#phone').val();
      if (phoneInput && phoneInput.trim() !== '') {
        const cleanPhone = phoneInput.replace(/\D/g, '');
        // Format phone as XXX-XXX-XXXX
        const formattedPhone = `${cleanPhone.substring(0, 3)}-${cleanPhone.substring(3, 6)}-${cleanPhone.substring(6, 10)}`;
        $('.phone').html(`<a href="tel:${formattedPhone}" style="color: #000000; text-decoration: none; font-size: 14px; font-family: 'Inter', Arial, sans-serif;">${phoneInput}</a>`);
      } else {
        // Use default phone from Canva design
        $('.phone').html('<a href="tel:515-331-2602" style="color: #000000; text-decoration: none; font-size: 14px; font-family: \'Inter\', Arial, sans-serif;">515-331-2602</a>');
      }
  
      // Handle ISO badge visibility
      const showIsoBadge = $('input[name="iso_badge"]:checked').val() === '1';
      if (showIsoBadge) {
        $('.iso_badge_container').show();
      } else {
        $('.iso_badge_container').hide();
      }
    }
  </script>